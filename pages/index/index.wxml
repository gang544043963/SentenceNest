<!--pages/index/index.wxml-->
<view class="container">
  <!-- å¤´éƒ¨æ—¥æœŸ -->
  <view class="header">
    <text class="date-text">{{currentDate}}</text>
    
    <!-- ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºï¼ˆæš‚æ—¶éšè—ï¼Œç­‰åç»­æ·»åŠ å¤´åƒæ˜µç§°å¡«å†™åŠŸèƒ½ï¼‰ -->
    <!-- <view wx:if="{{isLoggedIn && userInfo}}" class="user-info">
      <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <text class="user-name">{{userInfo.nickName}}</text>
    </view> -->
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä»Šæ—¥å¥å­ä¸­...</text>
  </view>

  <!-- å¥å­å¡ç‰‡ -->
  <view wx:else class="sentence-card card fade-in">
    <view class="sentence-content">
      <text class="english-text">{{sentence.content}}</text>
      <text class="chinese-text">{{sentence.translation}}</text>
    </view>
    
    <!-- æ“ä½œæŒ‰é’® -->
    <view class="action-buttons">
      <button 
        class="play-btn {{isPlaying ? 'playing' : ''}}" 
        bindtap="playAudio"
        disabled="{{isPlaying}}"
      >
        <text class="icon">{{isPlaying ? 'ğŸ”Š' : 'ğŸ”Š'}}</text>
        <text class="btn-text">{{isPlaying ? 'æ­£åœ¨æ’­æ”¾...' : 'æœ—è¯»'}}</text>
      </button>
      
      <!-- æ”¶è—æŒ‰é’® -->
      <view 
        class="collect-btn-simple {{isCollected ? 'collected' : ''}}" 
        bindtap="toggleCollection"
        wx:if="{{sentence}}"
        data-action="collect"
      >
        <text class="icon">{{isCollected ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        <text class="btn-text">{{isCollected ? 'å·²æ”¶è—' : 'æ”¶è—'}}</text>
      </view>
    </view>
  </view>

  <!-- é‡ç‚¹è¯æ±‡ -->
  <view wx:if="{{!loading && sentence.keywords}}" class="keywords-section card fade-in">
    <view class="section-title">
      <text class="title-text">é‡ç‚¹è¯æ±‡</text>
    </view>
    
    <view class="keywords-list">
      <view 
        wx:for="{{sentence.keywords}}" 
        wx:key="word" 
        class="keyword-item"
      >
        <view class="word-header">
          <text class="word">{{item.word}}</text>
          <text class="phonetic">{{item.phonetic}}</text>
          <text class="part-of-speech">{{item.partOfSpeech}}</text>
        </view>
        <text class="meaning">{{item.meaning}}</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æç¤º -->
  <view class="footer-tip">
    <text class="tip-text">æ¯å¤©ä¸€å¥è‹±è¯­ï¼ŒåšæŒå°±æ˜¯è¿›æ­¥ ğŸ’ª</text>
    <text class="play-tip">ğŸ’¡ ç‚¹å‡»æœ—è¯»æŒ‰é’®æ’­æ”¾è‹±è¯­å‘éŸ³</text>
  </view>
</view>